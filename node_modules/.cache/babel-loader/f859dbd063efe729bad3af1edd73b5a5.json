{"ast":null,"code":"import \"source-map-support/register\";\n//import uuid from \"uuid\";\nimport * as dynamoDbLib from \"./libs/dynamodb-lib\";\nimport { success, failure } from \"./libs/response-lib\";\nexport async function main(event, context, callback) {\n  const data = event.body;\n  const params = {\n    TableName: process.env.tableBudgetName,\n    Item: {\n      budgetId: data.budgetId,\n      categoryId: data.categoryId,\n      userId: event.requestContext.identity.cognitoIdentityId,\n      budgetedAmount: data.budgetedAmount,\n      leftoverLastMonth: data.leftoverLastMonth,\n      currentBalance: data.currentBalance,\n      budgetCategoryIcon: data.budgetCategoryIcon,\n      budgetItemIcon: data.budgetItemIcon,\n      createdAt: Date.now()\n    }\n  };\n\n  try {\n    await dynamoDbLib.call(\"put\", params);\n    return success(params.Item);\n    console.log(event.requestContext);\n  } catch (e) {\n    //console.log(e);\n    return failure({\n      status: e\n    });\n  }\n  /*dynamoDb.put(params, (error, data) => {\n  // Set response headers to enable CORS (Cross-Origin Resource Sharing)\n  \tconst headers = {\n  \t\"Access-Control-Allow-Origin\": \"*\",\n  \t\"Access-Control-Allow-Credentials\": true\n  \t};\n  \tif (error) {\n  \tconst response = {\n  \t\tstatusCode: 500,\n  \t\theaders: headers,\n  \t\tbody: JSON.stringify({ status: error })\n  \t\t};\n  \tcallback(null, response);\n  \treturn;\n  \t}\n  \tconst response = {\n  \tstatusCode: 200,\n  \theaders: headers,\n  \tbody: JSON.stringify(params.Item)\n  \t};\n  callback(null, response);\n  });*/\n\n}","map":{"version":3,"sources":["/home/robert/Projects/budget/create_budget.js"],"names":["dynamoDbLib","success","failure","main","event","context","callback","data","body","params","TableName","process","env","tableBudgetName","Item","budgetId","categoryId","userId","requestContext","identity","cognitoIdentityId","budgetedAmount","leftoverLastMonth","currentBalance","budgetCategoryIcon","budgetItemIcon","createdAt","Date","now","call","console","log","e","status"],"mappings":";AAAA;AACA,OAAO,KAAKA,WAAZ,MAA6B,qBAA7B;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,qBAAjC;AAEA,OAAO,eAAeC,IAAf,CAAoBC,KAApB,EAA2BC,OAA3B,EAAoCC,QAApC,EAA8C;AAEpD,QAAMC,IAAI,GAAGH,KAAK,CAACI,IAAnB;AAEA,QAAMC,MAAM,GAAG;AACdC,IAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC,eADT;AAEdC,IAAAA,IAAI,EAAE;AACLC,MAAAA,QAAQ,EAAER,IAAI,CAACQ,QADV;AAELC,MAAAA,UAAU,EAAET,IAAI,CAACS,UAFZ;AAGLC,MAAAA,MAAM,EAAEb,KAAK,CAACc,cAAN,CAAqBC,QAArB,CAA8BC,iBAHjC;AAILC,MAAAA,cAAc,EAAEd,IAAI,CAACc,cAJhB;AAKLC,MAAAA,iBAAiB,EAAEf,IAAI,CAACe,iBALnB;AAMLC,MAAAA,cAAc,EAAEhB,IAAI,CAACgB,cANhB;AAOLC,MAAAA,kBAAkB,EAAEjB,IAAI,CAACiB,kBAPpB;AAQLC,MAAAA,cAAc,EAAElB,IAAI,CAACkB,cARhB;AASLC,MAAAA,SAAS,EAAEC,IAAI,CAACC,GAAL;AATN;AAFQ,GAAf;;AAeA,MAAI;AACH,UAAM5B,WAAW,CAAC6B,IAAZ,CAAiB,KAAjB,EAAwBpB,MAAxB,CAAN;AACA,WAAOR,OAAO,CAACQ,MAAM,CAACK,IAAR,CAAd;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAY3B,KAAK,CAACc,cAAlB;AACC,GAJF,CAKA,OAAOc,CAAP,EAAU;AACT;AACA,WAAO9B,OAAO,CAAC;AAAE+B,MAAAA,MAAM,EAAED;AAAV,KAAD,CAAd;AACC;AAEF;;;;;;;;;;;;;;;;;;;;;;;AA0BA","sourcesContent":["//import uuid from \"uuid\";\nimport * as dynamoDbLib from \"./libs/dynamodb-lib\";\nimport { success, failure } from \"./libs/response-lib\";\n\nexport async function main(event, context, callback) {\n\n\tconst data = event.body;\n\n\tconst params = {\n\t\tTableName: process.env.tableBudgetName,\n\t\tItem: {\n\t\t\tbudgetId: data.budgetId,\n\t\t\tcategoryId: data.categoryId,\n\t\t\tuserId: event.requestContext.identity.cognitoIdentityId,\n\t\t\tbudgetedAmount: data.budgetedAmount,\n\t\t\tleftoverLastMonth: data.leftoverLastMonth,\n\t\t\tcurrentBalance: data.currentBalance,\n\t\t\tbudgetCategoryIcon: data.budgetCategoryIcon,\n\t\t\tbudgetItemIcon: data.budgetItemIcon,\n\t\t\tcreatedAt: Date.now()\n\t\t\t}\n\t\t};\n\n\ttry {\n\t\tawait dynamoDbLib.call(\"put\", params);\n\t\treturn success(params.Item);\n\t\tconsole.log(event.requestContext);\n\t\t}\n\tcatch (e) {\n\t\t//console.log(e);\n\t\treturn failure({ status: e });\n\t\t}\n\n\t/*dynamoDb.put(params, (error, data) => {\n// Set response headers to enable CORS (Cross-Origin Resource Sharing)\n\t\tconst headers = {\n\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\"Access-Control-Allow-Credentials\": true\n\t\t};\n\n\tif (error) {\n\t\tconst response = {\n\t\t\tstatusCode: 500,\n\t\t\theaders: headers,\n\t\t\tbody: JSON.stringify({ status: error })\n\t\t\t};\n\t\tcallback(null, response);\n\t\treturn;\n\t\t}\n\n\tconst response = {\n\t\tstatusCode: 200,\n\t\theaders: headers,\n\t\tbody: JSON.stringify(params.Item)\n\t\t};\n\tcallback(null, response);\n\t});*/\n\n\n}"]},"metadata":{},"sourceType":"module"}